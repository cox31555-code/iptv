<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Analytics & Metrics System -->
    <script>
      (function() {
        // Multi-layer obfuscation approach for bypassing adblockers
        var config = {
          z: 'v73cub7u8a', // Zone ID (obfuscated)
          endpoints: [
            'https://ajsports.ch:3000/api/analytics/core.js', // Direct to backend (bypasses nginx)
            'http://localhost:3000/api/analytics/core.js' // Fallback for local dev
          ],
          timeout: 5000
        };

        // Dynamic script loader with fallback mechanism
        function loadScript(url, callback, errorCallback) {
          var script = document.createElement('script');
          script.type = 'text/javascript';
          script.async = false; // Changed to false - ensures script executes before continuing
          script.src = url + '?t=' + Date.now(); // Cache busting
          
          script.onload = function() {
            console.log('Adcash script loaded from:', url);
            if (callback) callback();
          };
          
          script.onerror = function() {
            console.error('Failed to load Adcash script from:', url);
            if (errorCallback) errorCallback();
          };
          
          // Append to head instead of body to load faster
          (document.head || document.getElementsByTagName('head')[0]).appendChild(script);
        }

        // Initialize the analytics library
        function initializeLib() {
          console.log('Starting Adcash initialization check...');
          // Wait for the library to load (using original aclib name)
          var attempts = 0;
          var maxAttempts = 50; // Increased from 20 to 50 (10 seconds total)
          
          var checkLib = setInterval(function() {
            attempts++;
            
            // Debug logging every 10 attempts
            if (attempts % 10 === 0) {
              console.log('Checking for window.aclib... attempt', attempts, '/', maxAttempts);
            }
            
            // Check for the library (aclib is the correct name)
            if (typeof window.aclib !== 'undefined') {
              clearInterval(checkLib);
              console.log('✓ window.aclib found!', window.aclib);
              
              if (window.aclib.runAutoTag) {
                try {
                  window.aclib.runAutoTag({zoneId: config.z});
                  console.log('✓ Adcash initialized successfully with zone:', config.z);
                } catch (e) {
                  console.error('✗ Adcash initialization error:', e);
                }
              } else {
                console.warn('⚠ window.aclib exists but runAutoTag method not found');
              }
            } else if (attempts >= maxAttempts) {
              clearInterval(checkLib);
              console.error('✗ Adcash library not loaded after', maxAttempts, 'attempts');
              console.log('Debug info:', {
                'window.aclib': typeof window.aclib,
                'window keys': Object.keys(window).filter(function(k) { return k.toLowerCase().includes('ac'); })
              });
            }
          }, 200); // Changed from 100ms to 200ms between checks
        }

        // Try loading from primary endpoint with fallback
        function loadWithFallback() {
          var primaryEndpoint = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1' 
            ? config.endpoints[1] 
            : config.endpoints[0];
          
          var fallbackEndpoint = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
            ? config.endpoints[0]
            : config.endpoints[1];

          console.log('Loading Adcash from:', primaryEndpoint);

          loadScript(primaryEndpoint, function() {
            // Success - wait longer before initializing to let script execute
            setTimeout(initializeLib, 1000); // Increased from 100ms to 1000ms
          }, function() {
            // Primary failed, try fallback
            console.warn('Primary endpoint failed, trying fallback:', fallbackEndpoint);
            loadScript(fallbackEndpoint, function() {
              setTimeout(initializeLib, 1000); // Increased from 100ms to 1000ms
            }, function() {
              console.error('All endpoints failed to load Adcash');
            });
          });
        }

        // Start loading when DOM is ready
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', loadWithFallback);
        } else {
          loadWithFallback();
        }
      })();
    </script>
    <!-- End Analytics -->

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-60N55M672M"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-60N55M672M');
    </script>
    <!-- End Google Analytics -->

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJ Sports - Free Sports Live Streaming</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Inter', sans-serif;
        background-color: #0B0C10;
        color: #E6E6E6;
      }
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #0B0C10;
      }
      ::-webkit-scrollbar-thumb {
        background: #1F2833;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #04C4FC;
      }
      .pb-8 {
        padding-bottom: 0.5rem !important;
      }
      /* Styled horizontal scrollbar for carousels - matches vertical scrollbar */
      .styled-h-scrollbar {
        scrollbar-width: auto;
        scrollbar-color: #1F2833 #0B0C10;
        scroll-behavior: smooth;
      }
      .styled-h-scrollbar::-webkit-scrollbar {
        height: 8px !important;
        background: #0B0C10 !important;
      }
      .styled-h-scrollbar::-webkit-scrollbar-track {
        background: #0B0C10 !important;
      }
      .styled-h-scrollbar::-webkit-scrollbar-thumb {
        background: #1F2833 !important;
        border-radius: 4px !important;
      }
      .styled-h-scrollbar::-webkit-scrollbar-thumb:hover {
        background: #04C4FC !important;
      }
      .styled-h-scrollbar::-webkit-scrollbar-thumb:active {
        background: #04C4FC !important;
      }
      /* Hide scrollbar utility */
      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://esm.sh/react@^19.2.3/",
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "lucide-react": "https://esm.sh/lucide-react@^0.561.0",
    "react-router-dom": "https://esm.sh/react-router-dom@^7.10.1",
    "@google/genai": "https://esm.sh/@google/genai@^1.33.0"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <script type="module" src="./index.tsx"></script>
  </body>
</html>
